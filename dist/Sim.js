// Copyright Â© 2019 Brandon Li. All rights reserved.

// Minified distribution version - sim-core 0.0.0-dev.6 - MIT.
define(require=>{"use strict";const e=require("SIM_CORE/util/assert"),n=require("SIM_CORE/core-internal/Display"),t=require("SIM_CORE/core-internal/FPSCounter"),i=require("SIM_CORE/core-internal/Loader"),o=require("SIM_CORE/util/QueryParameters"),a=require("SIM_CORE/util/Util"),r=require("SIM_CORE/core-internal/NavigationBar"),s=require("SIM_CORE/Screen"),l=JSON.parse(require("text!REPOSITORY/package.json")),d=o.retrieve({ea:{type:"flag"},fps:{type:"flag"},version:{type:"flag"},dev:{type:"flag"}});return class{constructor(o,c){e(o instanceof s,`invalid screen: ${o}`),e(!c||Object.getPrototypeOf(c)===Object.prototype,`invalid options: ${c}`),c={name:l.name?a.toTitleCase(l.name):"",...c},window.addEventListener("pageshow",(function(e){e.persisted&&window.location.reload()})),d.version&&console.log(`${c.name}: v${l.version}`),d.ea&&e.enableAssertions();const w=new n,p=new i;if(w.addChild(p),d.fps){const e=new t;e.start(),w.addChild(e)}const v=new r(c.name);w.addChild(v),w.addChild(o),o.initializeModelAndView(),d.dev&&o._view.enableDevBorder(),window.onresize=()=>{const e=window.innerHeight,n=window.innerWidth;v.layout(n,e);const t=e-parseFloat(v.style.height);o.style.height=`${t}px`,o._view.layout(n,t)},window.onresize()}}});