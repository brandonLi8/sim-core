// Copyright Â© 2019 Brandon Li. All rights reserved.

// Minified distribution version - sim-core 0.0.0-dev.18 - MIT.
define(require=>{"use strict";const t=require("SIM_CORE/util/assert"),e=require("SIM_CORE/scenery/Node"),r=require("SIM_CORE/scenery/SVGNode"),i=require("SIM_CORE/util/Vector"),o=require("SIM_CORE/scenery/Rectangle"),n=require("SIM_CORE/scenery/LineNode"),h=require("SIM_CORE/util/Util"),c=require("SIM_CORE/scenery/Text");return class extends e{constructor(e,k,a){t(e instanceof i,`invalid range: ${e}`),t(!a||Object.getPrototypeOf(a)===Object.prototype,`invalid options: ${a}`),super(a={trackFill:"rgb( 100, 100, 100 )",trackStroke:"black",trackStrokeWidth:1.5,trackSize:new i(180,2),trackCornerRadius:0,thumbSize:new i(12,25),thumbFill:"rgb( 50, 145, 184) ",thumbFillHover:"rgb( 71, 207, 255 )",thumbStroke:"black",thumbStrokeWidth:1,thumbCenterLineStroke:"white",thumbCornerRadius:3,includeMajorTicks:!0,minorTickIncrement:null,majorTickLength:35,majorTickStroke:"black",majorTickStrokeWidth:1.3,minorTickLength:8,minorTickStroke:"rgb( 50, 50, 50 )",minorTickStrokeWidth:1,startDrag:null,endDrag:null,...a}),this._height=Math.max(a.majorTickLength,2*a.minorTickLength,a.thumbSize.y),this._width=a.trackSize.x+a.thumbSize.x+2*a.thumbStrokeWidth;const s=this._height/2,S=this._width/2,m=new o({width:a.trackSize.x,height:a.trackSize.y,fill:a.trackFill,y:s-a.trackSize.y/2,x:S-a.trackSize.x/2,stroke:a.trackStroke,strokeWidth:a.trackStrokeWidth,cornerRadius:a.trackCornerRadius,style:{cursor:"pointer"}}),d=[],u=(e.y-e.x)/a.minorTickIncrement+1,l=a.trackSize.x/(u-1);for(let t=0;t<u;t++){const e=0===t||t===u-1,r=new i(t*l+m.x,e?s-a.majorTickLength/2:s-a.minorTickLength),o=new i(t*l+m.x,e?s+a.majorTickLength/2:s),h=new n(r,o,{stroke:e?a.majorTickStroke:a.minorTickStroke,strokeWidth:e?a.majorTickStrokeWidth:a.minorTickStrokeWidth});d.push(h)}const x=new o({width:a.thumbSize.x,height:a.thumbSize.y,fill:a.thumbFill,y:s-a.thumbSize.y/2,stroke:a.thumbStroke,strokeWidth:a.thumbStrokeWidth,cornerRadius:a.thumbCornerRadius,style:{cursor:"pointer"}}),b=.75*a.thumbSize.y,g=new n(new i(0,s-b/2),new i(0,s+b/2),{stroke:a.thumbCenterLineStroke,strokeWidth:.08*a.thumbSize.x,style:{cursor:"pointer"}});let y;k.link(t=>{y=(t-e.x)/(e.y-e.x),x.x=y*a.trackSize.x-a.thumbSize.x/2+m.x,g.start.x=x.x+a.thumbSize.x/2,g.end.x=x.x+a.thumbSize.x/2});const w=()=>{a.startDrag&&a.startDrag()},z=t=>{y+=t.x/(a.trackSize.x+a.majorTickStrokeWidth),y=h.clamp(y,0,1),k.value=y*(e.y-e.x)+e.x},T=()=>{a.endDrag&&a.endDrag()};x.drag(w,z,T),g.drag(w,z,T),m.mousedown=t=>{y=t.x/(a.trackSize.x+a.majorTickStrokeWidth),y=h.clamp(y,0,1),k.value=y*(e.y-e.x)+e.x};const C=new c({text:`${e.x}`,x:m.x,y:-10}),R=new c({text:`${e.y}`,x:m.x+m.width,y:-10}),W=new r({children:[...d,m,x,g,C,R],width:this._width,height:this._height});this.addChild(W)}}});