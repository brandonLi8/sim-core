// Copyright Â© 2019 Brandon Li. All rights reserved.

// Minified distribution version - sim-core 0.0.0-dev.22 - MIT.
define(require=>{"use strict";const t=require("SIM_CORE/util/assert"),e=require("SIM_CORE/scenery/SVGNode"),r=require("SIM_CORE/util/Vector"),i=require("SIM_CORE/scenery/Rectangle"),n=require("SIM_CORE/scenery/LineNode"),o=require("SIM_CORE/util/Util"),h=require("SIM_CORE/scenery/Text");return class extends e{constructor(a,c,k){t(a instanceof r,`invalid range: ${a}`),t(!k||Object.getPrototypeOf(k)===Object.prototype,`invalid options: ${k}`),super(k={trackFill:"rgb( 100, 100, 100 )",trackStroke:"black",trackStrokeWidth:1.5,trackSize:new r(180,2),trackCornerRadius:0,thumbSize:new r(12,25),thumbFill:"rgb( 50, 145, 184) ",thumbFillHover:"rgb( 71, 207, 255 )",thumbStroke:"black",thumbStrokeWidth:1,thumbCenterLineStroke:"white",thumbCornerRadius:3,includeMajorTicks:!0,minorTickIncrement:null,majorTickLength:35,majorTickStroke:"black",majorTickStrokeWidth:1.3,minorTickLength:8,minorTickStroke:"rgb( 50, 50, 50 )",minorTickStrokeWidth:1,startDrag:null,endDrag:null,rightLabel:null,leftLabel:null,...k}),this.height=Math.max(k.majorTickLength,2*k.minorTickLength,k.thumbSize.y),this.width=k.trackSize.x+k.thumbSize.x+2*k.thumbStrokeWidth;const s=this.height/2,l=this.width/2,d=new i({width:k.trackSize.x,height:k.trackSize.y,fill:k.trackFill,y:s-k.trackSize.y/2,x:l-k.trackSize.x/2,stroke:k.trackStroke,strokeWidth:k.trackStrokeWidth,cornerRadius:k.trackCornerRadius,style:{cursor:"pointer"}}),S=[],u=(a.y-a.x)/k.minorTickIncrement+1,m=k.trackSize.x/(u-1);for(let t=0;t<u;t++){const e=0===t||t===u-1,i=new r(t*m+d.x,e?s-k.majorTickLength/2:s-k.minorTickLength),o=new r(t*m+d.x,e?s+k.majorTickLength/2:s),h=new n(i,o,{stroke:e?k.majorTickStroke:k.minorTickStroke,strokeWidth:e?k.majorTickStrokeWidth:k.minorTickStrokeWidth});S.push(h)}const x=new i({width:k.thumbSize.x,height:k.thumbSize.y,fill:k.thumbFill,y:s-k.thumbSize.y/2,stroke:k.thumbStroke,strokeWidth:k.thumbStrokeWidth,cornerRadius:k.thumbCornerRadius,style:{cursor:"pointer"}}),b=.75*k.thumbSize.y,g=new n(new r(0,s-b/2),new r(0,s+b/2),{stroke:k.thumbCenterLineStroke,strokeWidth:.08*k.thumbSize.x,style:{cursor:"pointer"}});let y;c.link(t=>{y=(t-a.x)/(a.y-a.x),x.x=y*k.trackSize.x-k.thumbSize.x/2+d.x,g.start=g.start.setX(x.x+k.thumbSize.x/2),g.end=g.end.setX(g.start.x)});const w=()=>{k.startDrag&&k.startDrag()},T=t=>{y+=t.x/(k.trackSize.x+k.majorTickStrokeWidth),y=o.clamp(y,0,1),c.value=y*(a.y-a.x)+a.x},z=()=>{k.endDrag&&k.endDrag()};x.drag({start:w,end:z,listener:T}),g.drag({start:w,end:z,listener:T}),d.mousedown=t=>{y=t.x/(k.trackSize.x+k.majorTickStrokeWidth),y=o.clamp(y,0,1),c.value=y*(a.y-a.x)+a.x};const L=new h({text:k.leftLabel?k.leftLabel:`${a.x}`,x:d.x,y:-10}),W=new h({text:k.rightLabel?k.rightLabel:`${a.y}`,x:d.x+d.width,y:-10}),C=new e({children:[...S,d,x,g,L,W],width:this.width,height:this.height});this.addChild(C)}}});