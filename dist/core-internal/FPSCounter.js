// Copyright © 2019 Brandon Li. All rights reserved.

// Minified distribution version - sim-core 0.0.0-dev.22 - MIT.
define(require=>{"use strict";const t=require("SIM_CORE/util/assert"),e=require("SIM_CORE/core-internal/DOMObject"),s=require("SIM_CORE/util/Util");return class extends e{constructor(e){e&&(t(!e.type,"FPSCounter sets options.type."),t(!e.innerHTML&&!e.text,"FPSCounter sets inner content."),t(!e.id&&!e.class&&!e.attributes,"FPSCounter sets options.attributes"),t(!e.children,"FPSCounter sets children."));const s={type:"div",style:{"z-index":99999999,position:"absolute",color:"red",left:"10px",top:"5px",fontSize:"17px",fontWeight:500,fontFamily:"Times, Arial, sans-serif",userSelect:"none",cursor:"default"},id:"fps-counter"};(e={...s,...e}).style={...s.style,...e.style},super(e)}get currentTime(){return s.convertFrom(Date.now(),s.MILLI)}update(t,e,n){const i=s.toFixed(s.convertTo(1/t,s.MILLI),2),r=s.toFixed(t,2),o=s.toFixed(e,2),c=s.toFixed(n,2);this.setText(`${r} FPS [ ↡${o} ↟${c} ] -- ~${i} ms/frame`)}start(){let t,e,s,n=this.currentTime,i=this.currentTime,r=0;const o=()=>{r++;const c=(t=this.currentTime)-n;n=t;const u=1/c;if(e=!e||u<e?u:e,s=!s||u>s?u:s,r%60==0){const n=t-i;i=t;const r=60/n;this.update(r,e,s),e=null,s=null}window.requestAnimationFrame(o)};window.requestAnimationFrame(o)}}});